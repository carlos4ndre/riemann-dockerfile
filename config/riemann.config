; vim: filetype=clojure

(logging/init :file "riemann.log")

; Listen on all interfaces for TCP (5555/5556) and UDP (5555)
(let [host "0.0.0.0"]
  (tcp-server :host host)
  (udp-server :host host)
  (ws-server  :host host))

; Expire old events from the index every 30 seconds.
(periodically-expire 30)

; Log specific events
(streams
  (where (or (tagged "creature")
             (tagged "weapon")
             (tagged "player"))
         #(info %)))

; Index all events
(let [index (index)]
  (streams index))
